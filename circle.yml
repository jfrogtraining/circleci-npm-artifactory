version: 2
jobs:
  build:
  working_directory: ~/circleci-npm-artifactory
      docker:
        - image: circleci/node:8.9.0 
      steps:
        - run:
            name: Install jFrog CLI
            command: curl -fL https://getcli.jfrog.io | sh
        - run:
            name: Configure Artifactory
            command: ./jfrog rt config --url $ARTIFACTORY_URL --user $ARTIFACTORY_USER --apikey $ARTIFACTORY_PASSWORD --interactive=false
        - run: rm -rf node_modules/
        - run:
            name: NPM Install
            branch: "master"
            command: ./jfrog rt npmi npm-virtual --build-name=circleci-npm-artifactory --build-number=$CIRCLE_BUILD_NUM

